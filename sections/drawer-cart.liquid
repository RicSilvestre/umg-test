<div class="drawer-cart_header">
  <h3>{{ 'general.cart.title' | t }}</h3>
</div>
<a href="/checkout">Tester</a>
<div class="drawer-cart_body">
  {% if cart.item_count < 1 %}
    <p>{{ 'general.cart.empty' | t }}</p>
  {% else %}
    <form action="{{ routes.cart_url }}" id="drawer-cart-form" method="post">
      {% for item in cart.items %}
        <div class="drawer-cart_item">
          <div class="drawer-cart_item_media">
            {{ item.image |  image_url: 'small' | img_tag }}
          </div>
          <div class="drawer-cart_item_info">
            <h5>{{ item.product.title }}</h5>
            <div class="quantity-wrapper">
              <button class="drawer-qty-decreaser drawer-qty-button">-</button>
              <input type="number" name="updates[]" value="{{ item.quantity }}" id="item-{{ forloop.index }}">
              <button class="drawer-qty-increaser drawer-qty-button">-</button>
            </div>
            {%- if item.product.has_only_default_variant == false
              or item.properties.size != 0
              or item.selling_plan_allocation != null
            -%}
              <dl>
                {%- if item.product.has_only_default_variant == false -%}
                  {%- for option in item.options_with_values -%}
                    <div class="product-option">
                      <p>{{ option.name }}: {{ option.value  }}</p>
                    </div>
                  {%- endfor -%}
                {%- endif -%}

                {% unless item.properties == empty %}
                  {% for property in item.properties %}
                    {{ property.first }}:

                    {% if property.last contains '/uploads/' %}
                      <a href="{{ property.last }}">{{ property.last | split: '/' | last }}</a>
                    {% else %}
                      {{ property.last }}
                    {% endif %}
                  {% endfor %}
                {% endunless %}
              </dl>
              <p class="product-option">{{ item.selling_plan_allocation.selling_plan.name }}</p>
            {%- endif -%}
            <div class="item-price-container">
              <span class="item-final-price">{{ item.final_line_price | money }}</span>
              {% render 'spinner' %}
            </div>
            <a class="item-remover" data-item-key="{{ item.key }}" href="{{ item.url_to_remove }}">Remove</a>
          </div>
        </div>
      {% endfor %}
    </form>
  {% endif %}
</div>
<div class="drawer-cart_footer">
  <textarea name="note" form="cart"></textarea>
  <h5>Subtotal:</h5>
  <p class="subtotal-price">{{ cart.total_price | money }}</p>
  <input type="submit" form="drawer-cart-form" name="checkout" value="Checkout">
</div>

<script>

</script>


{% schema %}
{
  "name": "Drawer Cart",
  "tag": "section",
  "settings": [

    ]
}
{% endschema %}
